# Coturn TURN server configuration
# For self-hosted WebRTC signaling

# Listener port for TURN/STUN
listening-port=3478

# TLS listener port (for secure connections)
tls-listening-port=5349

# Listening IP (all interfaces)
listening-ip=0.0.0.0

# External IP will be set dynamically via environment variable
# external-ip will be configured at runtime

# Relay IP (same as listening)
relay-ip=0.0.0.0

# Server name (realm)
realm=turn.videocall.local
server-name=turn.videocall.local

# Authentication
lt-cred-mech

# Static user credentials (can be overridden by env vars)
# Format: username:password
user=webrtc:webrtc123

# Don't use fingerprints (simplify for now)
fingerprint

# Security: only allow specific protocols
no-multicast-peers
no-loopback-peers

# Relay ports range (limited for Render free tier)
min-port=49152
max-port=49252

# Quotas (prevent abuse)
max-bps=1000000
bps-capacity=0
stale-nonce=600

# Logging
verbose
log-file=/var/log/turn/turnserver.log

# Allow both UDP and TCP
no-tlsv1
no-tlsv1_1

# Performance tuning
total-quota=100
user-quota=10

# Mobility
mobility

# Additional security
no-cli
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
